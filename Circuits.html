<!DOCTYPE html>
<html lang="en">
<head>
<title>Destinations</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Travello template project">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="styles/bootstrap4/bootstrap.min.css">
<link href="plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.carousel.css">
<link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
<link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/animate.css">
<link rel="stylesheet" type="text/css" href="styles/destinations.css">
<link rel="stylesheet" type="text/css" href="styles/destinations_responsive.css">
<script src="https://cdn.jsdelivr.net/npm/handlebars@4.7.7/dist/handlebars.min.js"></script>	

</head>
<body>

<div class="super_container">
	
	<!-- Header -->

	<header class="header">
		<div class="container">
			<div class="row">
				<div class="col">
					<div class="header_content d-flex flex-row align-items-center justify-content-start">
						<div class="header_content_inner d-flex flex-row align-items-end justify-content-start">
							<div><a href="index.html"><img src="images/Logo2.svg" class="logo"></a></div>
							<nav class="main_nav">
								<ul class="d-flex flex-row align-items-start justify-content-start">
									<li ><a href="index.html">Accueil</a></li>
									<li ><a href="about.html">Qui Somme-Nous</a></li>
									<li ><a href="destinations.html">Excursion</a></li>
									<li class="active"><a href="Circuits.html">Circuits</a></li>
									<li><a href="#">Contact</a></li>
								</ul>
							</nav>
							

							<!-- Hamburger -->

							<div class="hamburger ml-auto">
								<i class="fa fa-bars" aria-hidden="true"></i>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="header_social d-flex flex-column align-items-center justify-content-start">
			<div class="header_phone">Appelez-nous : +216 99 729 929
			<ul class="d-flex flex-row align-items-start justify-content-start">
				<li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
				<li><a href="https://www.facebook.com/profile.php?id=100063748412724"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
			</ul>
			
		</div>
	</header>


	<!-- Menu -->

	<div class="menu">
		<div class="menu_header d-flex flex-row align-items-center justify-content-start">
			<div class="menu_logo"><a href="index.html"><img src="images/Logo2.svg"></a></div>
			<div class="menu_close_container ml-auto"><div class="menu_close"><div></div><div></div></div></div>
		</div>
		<div class="menu_content">
			<ul>
				<li><a href="index.html">Accueil</a></li>
				<li><a href="about.html">Qui Somme-Nous</a></li>
				<li><a href="#">Excursion</a></li>
				<li><a href="news.html">Circuits</a></li>
				<li><a href="contact.html">Contact</a></li>
			</ul>
		</div>
		<div class="menu_social">
			<div class="menu_phone ml-auto">Appelez-nous : +216 99 729 929</div>
			<ul class="d-flex flex-row align-items-start justify-content-start">
				<li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
				<li><a href="https://www.facebook.com/profile.php?id=100063748412724"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
			</ul>
		</div>
	</div>
	
	<div class="home">
		
		<!-- Home Slider -->
		<div class="home_slider_container">
			<div class="owl-carousel owl-theme home_slider">
				
				<!-- Slide -->
				<div class="owl-item">
					<div class="background_image" style="background-image:url(images/12.svg)"></div>
					<div class="home_slider_content_container">
						<div class="container">
							<div class="row">
								<div class="col">
									<div class="home_slider_content">
										<div class="home_title"><h2>Let us take you away</h2></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Slide -->
				<div class="owl-item">
					<div class="background_image" style="background-image:url(images/1.jpg)"></div>
					<div class="home_slider_content_container">
						<div class="container">
							<div class="row">
								<div class="col">
									<div class="home_slider_content">
										<div class="home_title"><h2>Let us take you away</h2></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Slide -->
				<div class="owl-item">
					<div class="background_image" style="background-image:url(images/images/12.svg)"></div>
					<div class="home_slider_content_container">
						<div class="container">
							<div class="row">
								<div class="col">
									<div class="home_slider_content">
										<div class="home_title"><h2>Let us take you away</h2></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>

			
		</div>
	</div>

	<!-- Destinations -->

    <div class="destinations" id="destinations">
		<div class="container">
			<div class="row">
				<div class="col text-center">
					<div class="section_subtitle">simply amazing places</div>
					<div class="section_title"><h2>Popular Destinations</h2></div>
				</div>
			</div>
			
			<div class="row destinations_row">
				<div class="col">
					<div class="destinations_container item_grid" id="destinations-container">
						<!-- Les destinations seront insérées ici par Handlebars -->
					</div>
				</div>
			</div>
			<!-- <div class="row load_more_row">
				<div class="col">
					<div id="loadMore" class="button load_more_button"><a href="#">load more</a></div>
				</div>
			</div> -->
		</div>
	</div>

    <script id="destinations-template" type="text/x-handlebars-template">
		{{#each this}}
			<div class="destination item">
				<div class="destination_image">
					<img src="Backend/{{image}}" alt="{{title}}">
				</div>
				<div class="destination_content">
					  
                            <div class="destination_title">
								<a href="circuitsdetaille.html" class="title-link" data-title="{{title}}">
									{{title}}
								</a>
                            </div>
							
                            <div class="destination_subtitle">
                                <p> {{description}}  </p>
                            </div>
                            
                            <div class="destination_info" style="margin-top: 3%;">
								<span class="destination_price">{{durée}}</span>
								<!-- <button class="btn-sm" onclick="window.location.href='reservation.html?title={{title}}&durée={{durée}}'">
									Réserver
								</button> -->
								
							</div>
				
				</div>
			</div>
		{{/each}}
	</script>

	<script>
		fetch('http://localhost:3000/circuits/getall')
	 .then(response => response.json())
	 .then(excursionsData => {
		 console.log('Données reçues:', excursionsData);
 
		 if (Array.isArray(excursionsData) && excursionsData.length > 0) {
			 // Stocker toutes les données dans Local Storage
			 localStorage.setItem('excursionsData', JSON.stringify(excursionsData));
			 console.log('Données stockées dans Local Storage.');
 
			 // Utiliser Handlebars pour afficher les titres avec des liens cliquables
			 const templateSource = document.getElementById('destinations-template').innerHTML;
			 const template = Handlebars.compile(templateSource);
 
			 const html = template( excursionsData );
			 document.getElementById('destinations-container').innerHTML = html;
		 } else {
			 console.log("Aucune donnée à afficher");
			 document.getElementById('destinations-container').innerHTML = "<p>Aucune destination disponible.</p>";
		 }
	 })
	 .catch(error => {
		 console.error('Erreur de récupération des données:', error);
		 alert('Erreur lors de la récupération des données. Veuillez vérifier la console.');
	 });
 
	 </script>
	 <script>
		document.addEventListener('DOMContentLoaded', () => {
    document.addEventListener('click', (event) => {
        if (event.target && event.target.classList.contains('title-link')) {
            event.preventDefault();

            // Récupérer le titre de l'excursion cliqué
            const selectedTitle = event.target.getAttribute('data-title');

            // Récupérer les données stockées dans Local Storage
            const excursionsData = JSON.parse(localStorage.getItem('excursionsData') || '[]');

            // Trouver l'excursion correspondante
            const selectedExcursion = excursionsData.find(excursion => excursion.title === selectedTitle);

            if (selectedExcursion) {
                // Stocker les données de l'excursion sélectionnée dans Local Storage
                localStorage.setItem('selectedExcursion', JSON.stringify(selectedExcursion));

                // Rediriger vers la page de détails
                window.location.href = 'circuitsdetaille.html';
            } else {
                console.error('Aucune excursion trouvée pour ce titre.');
            }
        }
    });
});

	 </script>

	<!-- Riviser -->
	<!-- <script>
		// Récupérer les données depuis l'API (en utilisant fetch)
		fetch('http://localhost:3000/excursion/getall') // L'URL de votre API
		  .then(response => response.json())
		  .then(excursionsData => {
			// Récupérer le template Handlebars
			const templateSource = document.getElementById('destinations-template').innerHTML;
			
			// Compiler le template avec Handlebars
			const template = Handlebars.compile(templateSource);
	  
			// Fonction pour afficher les excursions
			const displayExcursions = (excursions) => {
			  // Appliquer les données au template
			  const html = template({ excursions: excursions });
			  
			  // Insérer le HTML généré dans le conteneur
			  document.getElementById('destinations-container').innerHTML = html;
			};
	  
			// Afficher toutes les destinations au début
			displayExcursions(excursionsData);
	  
			// Filtrer par "Une Demi-journée" lors du clic
			const demiJourneeButton = document.querySelector('.num_sorting_btn:nth-child(1)');
			demiJourneeButton.addEventListener('click', () => {
			  // Filtrer les excursions ayant une durée "Une Demi journée"
			  const filteredExcursions = excursionsData.filter(excursion => excursion.durée === "Une Demi journée");
			  
			  // Afficher les destinations filtrées
			  displayExcursions(filteredExcursions);
			});
		  })
		  .catch(error => console.error('Erreur de récupération des données:', error));
	  </script> -->



	<!-- Footer  -->
	<footer class="footer">
		<div class="parallax_background parallax-window" data-parallax="scroll" data-image-src="images/elements.svg" data-speed="0.8"></div>
		<div class="container">
			<div class="row">
				<div class="col">
					<div class="newsletter">
						<div class="newsletter_title_container text-center">
							<div class="newsletter_title">N'hésitez pas à partager votre expérience de voyage avec Au Cœur Du Désert.</div>
							
						</div>
						<div class="newsletter_form_container">
							<form action="#" class="newsletter_form d-flex flex-column align-items-start" id="newsletter_form">
								<div class="d-flex flex-column align-items-start w-100">
									<div class="form-group w-100">
										<input type="text" class="newsletter_input" id="newsletter_input_name" placeholder="Name" required="required">
										<div class="input_border"></div>
									</div>
									<div class="form-group w-100">
										<input type="email" class="newsletter_input" id="newsletter_input_email" placeholder="Your e-mail" required="required">
										<div class="input_border"></div>
									</div>
									<div class="form-group w-100">
										<input type="text" class="newsletter_input" id="newsletter_input_description" placeholder="Description" required="required">
										<div class="input_border"></div>
									</div>
								</div>
								<div class="d-flex justify-content-center w-100 mt-3">
									<button class="newsletter_button">Envoyer</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
	
			<div class="row footer_contact_row">
				<div class="col-xl-10 offset-xl-1">
					<div class="row">
						<!-- Footer Contact Item -->
						<div class="col-xl-4 footer_contact_col">
							<div class="footer_contact_item d-flex flex-column align-items-center justify-content-start text-center">
								<div class="footer_contact_icon"><img src="images/sign.svg" alt=""></div>
								<div class="footer_contact_title">give us a call</div>
								<div class="footer_contact_list">
									<ul>
										<li>Mobile Agence : +216 99 729 929</li>
										<li>Mobile Personnel: +216 98 213027</li>
										
									</ul>
								</div>
							</div>
						</div>
	
						<!-- Footer Contact Item -->
						<div class="col-xl-4 footer_contact_col">
							<div class="footer_contact_item d-flex flex-column align-items-center justify-content-start text-center">
								<div class="footer_contact_icon"><img src="images/trekking.svg" alt=""></div>
								<div class="footer_contact_title">come & drop by</div>
								<div class="footer_contact_list">
									<ul style="max-width:190px">
										<li>Avenue Abou kassem Chebbi</li>
									</ul>
								</div>
							</div>
						</div>
	
						<!-- Footer Contact Item -->
						<div class="col-xl-4 footer_contact_col">
							<div class="footer_contact_item d-flex flex-column align-items-center justify-content-start text-center">
								<div class="footer_contact_icon"><img src="images/around.svg" alt=""></div>
								<div class="footer_contact_title">send us a message</div>
								<div class="footer_contact_list">
									<ul>
										<li>Aucoeur.dudesert@gnet.tn</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
	</footer>
</div>

<script src="js/jquery-3.2.1.min.js"></script>
<script src="styles/bootstrap4/popper.js"></script>
<script src="styles/bootstrap4/bootstrap.min.js"></script>
<script src="plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
<script src="plugins/easing/easing.js"></script>
<script src="plugins/Isotope/isotope.pkgd.min.js"></script>
<script src="plugins/parallax-js-master/parallax.min.js"></script>
<script src="js/destinations.js"></script>
<script src="plugins/greensock/TweenMax.min.js"></script>
<script src="plugins/greensock/TimelineMax.min.js"></script>
<script src="plugins/scrollmagic/ScrollMagic.min.js"></script>
<script src="plugins/greensock/animation.gsap.min.js"></script>
<script src="plugins/greensock/ScrollToPlugin.min.js"></script>
<script src="plugins/scrollTo/jquery.scrollTo.min.js"></script>
<script src="js/custom.js"></script>
<script src="js/destinations.js"></script>

</body>
</html>